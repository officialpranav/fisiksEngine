var g=Object.defineProperty;var M=(c,t,s)=>t in c?g(c,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[t]=s;var r=(c,t,s)=>(M(c,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&e(h)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();class o{constructor(t,s){r(this,"x");r(this,"y");this.x=t,this.y=s}add(t){return new o(this.x+t.x,this.y+t.y)}subtract(t){return new o(this.x-t.x,this.y-t.y)}divide(t){return new o(this.x/t,this.y/t)}multiply(t){return new o(this.x*t,this.y*t)}normal(){return new o(-this.y,this.x)}unit(){return this.divide(this.magnitude())}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}dot(t){return this.x*t.x+this.y*t.y}static dotProduct(t,s){return t.x*s.x+t.y*s.y}static closestPointOnLine(t,s,e){const i=s.x,n=s.y,h=s.x+t.x,u=s.y+t.y,d=e.x,p=e.y,l={x:h-i,y:u-n},m={x:d-i,y:p-n},f=l.x*l.x+l.y*l.y;let x=m.x*l.x+m.y*l.y;const w=Math.min(1,Math.max(0,x/f));return x=(h-i)*(p-n)-(u-n)*(d-i),{x:i+l.x*w,y:n+l.y*w}}}class b{constructor(t,s,e=new o(0,0),i=new o(0,1),n=1,h="white"){r(this,"shape");r(this,"pos");r(this,"fill");r(this,"v");r(this,"a");r(this,"context");r(this,"elasticity");this.pos=s,this.fill=h,this.v=e,this.a=i,this.context=t,this.elasticity=n}move(){this.v=this.v.add(this.a),this.pos=this.pos.add(this.v)}}class P extends b{constructor(s,e,i,n,h,u,d){super(s,e,n,h,u,d);r(this,"shape");r(this,"radius");r(this,"mass");r(this,"inverseMass");this.shape="circle",this.radius=i,this.mass=Math.PI*i*i,this.inverseMass=1/this.mass}render(s=!0){if(this.context.beginPath(),this.context.arc(this.pos.x,this.pos.y,this.radius,0,2*Math.PI),this.context.fillStyle=this.fill,this.context.fill(),this.context.strokeStyle="black",this.context.stroke(),this.context.closePath(),s){let e=4;this.context.beginPath(),this.context.moveTo(this.pos.x,this.pos.y),this.context.lineTo(this.pos.x+this.v.x*e,this.pos.y+this.v.y*e),this.context.strokeStyle="black",this.context.stroke(),this.context.closePath(),this.context.beginPath(),this.context.moveTo(this.pos.x,this.pos.y),this.context.lineTo(this.pos.x+this.a.x*e,this.pos.y+this.a.y*e),this.context.strokeStyle="red",this.context.stroke(),this.context.closePath()}this.context.save()}handleCanvasCollision(){let s=this.context.canvas;if(this.pos.x+this.radius>s.width){let e=this.pos.x+this.radius-s.width;return this.pos.x-=e*2,this.v.x*=-1,!0}else if(this.pos.x-this.radius<0){let e=this.pos.x-this.radius;return this.pos.x+=e*-2,this.v.x*=-1,!0}if(this.pos.y+this.radius>s.height){let e=this.pos.y+this.radius-s.width;return this.pos.y-=e*2,this.v.y*=-this.elasticity,!0}else if(this.pos.y-this.radius<0){let e=this.pos.y-this.radius;return this.pos.y+=e*-2,this.v.y*=-1,!0}return!1}handleObjectCollision(s){switch(s.shape){case"circle":let e=s;if(this.radius+e.radius>=e.pos.subtract(this.pos).magnitude()){const i=this.pos.subtract(e.pos);let n=this.radius+e.radius-i.magnitude();const h=i.unit().multiply(i.dot(this.v)/i.magnitude());n+=h.magnitude()*.5;const u=i.unit().multiply(n/(this.inverseMass+e.inverseMass));this.pos=this.pos.add(u.multiply(this.inverseMass)),e.pos=e.pos.add(u.multiply(-e.inverseMass));const d=i.unit(),l=this.v.subtract(e.v).dot(d),f=(-l*Math.min(this.elasticity,e.elasticity)-l)/(this.inverseMass+e.inverseMass),x=d.multiply(f);return this.v=this.v.add(x.multiply(this.inverseMass)),e.v=e.v.subtract(x.multiply(e.inverseMass)),!0}return!1;default:return!1}}}class C extends b{constructor(s,e,i,n){super(s,new o((e.x+i.x)/2,(e.y+i.y)/2),new o(0,0),new o(0,0),void 0,n);r(this,"shape");r(this,"start");r(this,"end");this.shape="line",this.start=e,this.end=i}render(){this.context.beginPath(),this.context.moveTo(this.start.x,this.start.y),this.context.lineTo(this.end.x,this.end.y),this.context.strokeStyle=this.fill,this.context.stroke(),this.context.closePath()}move(){}handleCanvasCollision(){return!1}handleObjectCollision(){return!1}}class j{constructor(t,s,e="lightgrey"){r(this,"element");r(this,"context");r(this,"objects");this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.width=t,this.element.height=s,this.element.style.backgroundColor=e,this.element.style.outline="1px solid black",this.objects=[],document.body.append(this.element)}circle(t,s,e,i,n,h){this.objects.push(new P(this.context,t,s,e,i,n,h))}lineSegment(t,s,e){this.objects.push(new C(this.context,t,s,e))}draw(){this.clear();for(let t of this.objects){t.render(),t.move(),t.handleCanvasCollision();for(let s of this.objects)t!==s&&t.handleObjectCollision(s)}return this.element}clear(){this.context.clearRect(0,0,this.element.width,this.element.height)}}let y=!1;document.getElementById("player").addEventListener("click",c=>{const t=c.target;if(y){y=!1,t.textContent="|>";return}t.textContent="| |",y=!0,v()});document.getElementById("reset").addEventListener("click",()=>{location.reload()});const a=new j(400,400);a.circle(new o(220,200),20,new o(0,0));a.circle(new o(100,101),20,new o(0,0));a.circle(new o(322,230),20,new o(0,0));a.circle(new o(204,120),20,new o(0,0));a.circle(new o(203,301),20,new o(0,0));a.circle(new o(340,304),20,new o(0,0));a.draw();function v(){y&&(a.draw(),requestAnimationFrame(v))}v();
